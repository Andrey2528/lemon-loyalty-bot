# Lemon Loyalty Bot

Telegram –±–æ—Ç —Å–∏—Å—Ç–µ–º–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç—ñ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É Lemon –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é Supabase PostgreSQL.

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- üì± QR-–∫–æ–¥–∏ –¥–ª—è –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –±–æ–Ω—É—Å—ñ–≤
- üí∞ –°–∏—Å—Ç–µ–º–∞ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –±–∞–ª—ñ–≤
- üçΩ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –º–µ–Ω—é –∑–∞–∫–ª–∞–¥—É
- üõµ –î–æ—Å—Ç–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Bolt Food
- üìÖ –ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è —Å—Ç–æ–ª–∏–∫—ñ–≤
- üè∑ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∞–∫—Ü—ñ—è–º–∏
- ‚öôÔ∏è –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —Ä–æ–∑—Å–∏–ª–æ–∫

## –î–µ–ø–ª–æ–π –Ω–∞ Koyeb + Supabase

### –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–∫–∞—É–Ω—Ç –Ω–∞ [Koyeb](https://www.koyeb.com/)
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–∫–∞—É–Ω—Ç –Ω–∞ [Supabase](https://supabase.com/) –¥–ª—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
3. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Supabase
1. **–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç** –≤ Supabase
2. **–°–∫–æ–ø—ñ—é–π—Ç–µ Database URL:**
   - –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ Settings ‚Üí Database
   - –°–∫–æ–ø—ñ—é–π—Ç–µ Connection string (URI format)
   - –§–æ—Ä–º–∞—Ç: `postgresql://[user]:[password]@[host]:[port]/[database]`

### –ö—Ä–æ–∫–∏ –¥–µ–ø–ª–æ—é

1. **–£–≤—ñ–π–¥—ñ—Ç—å –≤ Koyeb —Ç–∞ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Å–µ—Ä–≤—ñ—Å:**
   - –ö–ª—ñ–∫–Ω—ñ—Ç—å "Create App"
   - –í–∏–±–µ—Ä—ñ—Ç—å "Deploy from Git"
   - –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å GitHub —Ç–∞ –≤–∏–±–µ—Ä—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π

2. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—É:**
   - **Name**: `lemon-loyalty-bot`
   - **Type**: Web Service
   - **Instance type**: Nano (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ)
   - **Regions**: Frankfurt

3. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–±–æ—Ä–∫–∏:**
   - **Builder**: Buildpack
   - **Build command**: `pip install -r requirements.txt`
   - **Run command**: `python bot.py`

4. **–ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:**
   - `TELEGRAM_TOKEN` = –≤–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–æ—Ç—Ä–∏–º–∞–π—Ç–µ —É @BotFather)
   - `DATABASE_URL` = PostgreSQL URL –∑ Supabase

‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û**: –ù—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω–∏ –≤ –∫–æ–¥—ñ! –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç—ñ–ª—å–∫–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.

5. **–î–µ–ø–ª–æ–π:**
   - –ö–ª—ñ–∫–Ω—ñ—Ç—å "Deploy"
   - –û—á—ñ–∫–∞–π—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Å–±–æ—Ä–∫–∏

### –ü–µ—Ä–µ–≤–∞–≥–∏ Koyeb + Supabase

- üÜì **–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ**: 512MB RAM –Ω–∞ Koyeb + 2GB DB –Ω–∞ Supabase
- üîÑ **–ê–≤—Ç–æ—Ä–µstart** –ø—Ä–∏ –∑–±–æ—è—Ö
- üìä **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥** –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- üóÑÔ∏è **–ü–æ—Å—Ç—ñ–π–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö** - –¥–∞–Ω—ñ –Ω–µ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è –ø—Ä–∏ restart
- üåç **Global CDN**
- üîí **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π HTTPS**

## –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫

1. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
```bash
pip install -r requirements.txt
```

2. **–°—Ç–≤–æ—Ä—ñ—Ç—å .env —Ñ–∞–π–ª:**
```bash
cp .env.example .env
# –ó–∞–ø–æ–≤–Ω—ñ—Ç—å TELEGRAM_TOKEN —Ç–∞ DATABASE_URL
```

3. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞:**
```bash
python bot.py
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

- `bot.py` - –æ—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
- `config.py` - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞  
- `db.py` - —Ä–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (Supabase/SQLite)
- `broadcast.py` - —Ä–æ–∑—Å–∏–ª–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ –∞–¥–º—ñ–Ω-—Ñ—É–Ω–∫—Ü—ñ—ó
- `.koyeb.yml` - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è Koyeb
- `Dockerfile` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è
- `start.bat` - –ª–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ –≤ Windows

## –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î —Ç–∏–ø –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:
- **Production**: PostgreSQL —á–µ—Ä–µ–∑ Supabase (—è–∫—â–æ —î DATABASE_URL)
- **Development**: SQLite –ª–æ–∫–∞–ª—å–Ω–æ (fallback)

–¢–∞–±–ª–∏—Ü—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É.
